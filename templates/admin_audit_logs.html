{% extends "base_fixed.html" %}
{% block title %}Audit Logs{% endblock %}
{% block content %}
<div class="card">
  <div class="card-header"><i class="fas fa-shield-alt me-2"></i>Recent Audit Logs</div>
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-sm table-striped">
        <thead><tr>
          <th>Time</th><th>User ID</th><th>Action</th><th>Table</th><th>Record ID</th><th>Old Values</th><th>New Values</th>
        </tr></thead>
        <tbody>
          {% for log in logs %}
          <tr>
            <td>{{ log.created_at.strftime('%Y-%m-%d %H:%M:%S') if log.created_at else '-' }}</td>
            <td>{{ log.user_id }}</td>
            <td>{{ log.action }}</td>
            <td>{{ log.table_name }}</td>
            <td>{{ log.record_id or '-' }}</td>
            <td><code style="white-space: pre-wrap;">{{ log.old_values or '' }}</code></td>
            <td><code style="white-space: pre-wrap;">{{ log.new_values or '' }}</code></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}

